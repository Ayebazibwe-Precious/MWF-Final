extends layout

block css
  link(rel="stylesheet", href="/css/attendantDashboard.css")

block content
  include includes/sidebar1.pug

  //  Page Wrapper
  .page-wrapper
    .page-content
      // Main Container
      .container
        // Dashboard Cards
        .cards
          .card.total-sales
            i.fa-solid.fa-sack-dollar
            h3 Total Sales (Today)
            p UGX #{totalSales.toLocaleString()}

          .card.sales-count
            i.fa-solid.fa-receipt
            h3 Transactions Today
            p #{totalSalesCount}

          .card.products
            i.fa-solid.fa-boxes-stacked
            h3 Products Available
            p #{productsAvailable || 0}

          .card.low-stock
            i.fa-solid.fa-triangle-exclamation
            h3 Low Stock Alerts
            p #{lowStockCount || 0}

        // Stock Summary (Aggregated)
        section.panel
          .header-row
            h2 STOCK SUMMARY

          .table-container
            table#stockSummary
              thead
                tr
                  th Product Name
                  th Product Type
                  th Total Quantity
                  th Avg Cost Price
                  th Avg Selling Price
              tbody
                if stockSummary && stockSummary.length
                  each item in stockSummary
                    tr
                      td #{item._id.name}
                      td #{item._id.type}
                      td #{item.totalQty}
                      td UGX #{item.avgCost != null ? item.avgCost.toLocaleString() : '0'}
                      td UGX #{item.avgPrice != null ? item.avgPrice.toLocaleString() : '0'}
                else
                  tr
                    td(colspan="5") No products in stock

    // Footer 
    footer.footer
      p Â© 2025 MWF. All rights reserved.
      p
        | Developed by 
        span.dev-name Mary Precious Ayebazibwe
        |  at 
        span.company-name Mayondo Wood & Furniture Ltd.
        | .
