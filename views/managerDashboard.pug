extends layout 

block css 
  link(rel="stylesheet", href="/css/managerDashboard.css") 

block content
  include includes/sidebar.pug

  // === Page Wrapper ===
  .page-wrapper
    .page-content
      // === Main Content ===
      .main
        .dashboard-container
          header
            h1 Business Dashboard

          // === Top Stat Cards ===
          section.grid.stats
            .stat-card.total-sales
              i.fa-solid.fa-sack-dollar
              h3 Sales
              p.small-text UGX #{totalSales}
            .stat-card.products
              i.fa-solid.fa-boxes-stacked
              h3 In Stock
              p.small-text UGX #{totalStockValue}
            .stat-card.low-stock
              i.fa-solid.fa-triangle-exclamation
              h3 Out Of Stock
              p.small-text.text-red #{outOfStockCount.toLocaleString()}
            .stat-card.users
              i.fa-solid.fa-users
              h3 Users
              p.small-text #{totalUsers.toLocaleString()}

          // === Quick Action Cards ===
          section.quick-actions
            .quick-action-card
              a(href="/addSale")
                i.fa-solid.fa-cart-plus.fa-2x
                p Add Sale
            .quick-action-card
              a(href="/addStock")
                i.fa-solid.fa-boxes-stacked.fa-2x
                p Add Stock
            .quick-action-card
              a(href="/stockReport")
                i.fa-solid.fa-file-invoice.fa-2x
                p Generate Stock Report
            .quick-action-card
              a(href="/salesReport")
                i.fa-solid.fa-chart-line.fa-2x
                p Generate Sales Report

          // === Charts Section ===
          section.charts
            .chart-card
              h3 Sales vs Stock
              canvas#salesStockChart
            .chart-card
              h3 Most Sold Products
              canvas#topProductsChart

          // === Report Cards Section ===
          section.grid.reports
            .report-card
              h2 Stock Overview

              // Current Available Stock
              .inner-card
                h3 Current Available Stock
                if stockItems.length
                  ul#stock-list
                    each item in stockItems
                      li #{item._id} - #{item.totalQty} units
                else
                  p No stock available

              // Low Stock Alerts
              .inner-card.alert
                h3 Low Stock Alerts
                if lowStockItems.length
                  ul#low-stock-list
                    each item in lowStockItems
                      li #{item._id} - only #{item.totalQty} left!
                else
                  p No low stock alerts

            .report-card
              h2 Sales Overview
              .inner-card
                h3 Total Sales
                p#total-sales UGX #{totalSales}
              .inner-card
                h3 Top Customers
                ul#top-customers
                  each customer in topCustomers
                    li= customer
              .inner-card
                h3 Payment Methods
                ul#payment-methods
                  each method in paymentMethods
                    li= method

    // === Footer ===
    footer.footer
      p Â© 2025 MWF. All rights reserved.
      p
        | Developed by 
        span.dev-name Mary Precious Ayebazibwe
        |  at 
        span.company-name Mayondo Wood & Furniture Ltd.
        | .

  // === External JS ===
  script(src="js/managerDashboard.js")
