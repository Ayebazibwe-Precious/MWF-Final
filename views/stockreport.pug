extends layout

block css
  link(rel="stylesheet", href="/css/stockreport.css")

block content
  main.main-content
    .report-container
      // --- Header ---
      header.report-header
        h1 MWF Stock Report
        p B2B Wood & Furniture Company
        p
          strong Date:
          |  
          span#reportDate

      // --- Filter Section ---
      section.filter
        form#filterForm
          label(for="filterType") View By: 
          select#filterType(name="filterType")
            option(value="" selected) -- Select --
            option(value="day") Day
            option(value="week") Week
            option(value="month") Month
          input#filterDate(type="date", name="filterDate")
          button.btn-filter(type="submit")
            i.fa-solid.fa-filter
            | Apply Filter
          button.btn-refresh(type="button" id="btnRefresh")
            i.fa-solid.fa-rotate-right
            | Refresh
          a.btn-close(href="/stockManager")
            i.fa-solid.fa-xmark
            | Close

      // --- Table Section ---
      section.table-section
        h2 Stock Data
        .table-wrapper
          table
            thead
              tr
                th Product Name
                th Product Type
                th Quantity
                th Cost Price
                th Selling Price
                th Supplier Name
                th Date Received
                th Quality
                th Color
                th Measurements
            tbody#stock-table-body
              if items.length
                each item in items
                  tr
                    td #{item.name}
                    td #{item.type}
                    td #{item.qty}
                    td #{item.cost}
                    td #{item.price}
                    td #{item.supplier}
                    td #{moment(item.date).format("DD-MM-YYYY")}
                    td #{item.quality}
                    td #{item.color}
                    td #{item.measurements}
              else
                tr
                  td(colspan="10") No stock data available

      // --- Footer Section ---
      footer.report-footer
        p Generated by MWF Stock System | Confidential Report
        button.btn-print(onclick="window.print()")
          i.fa-solid.fa-print
          | Print Report

  // --- Embed backend stock as JSON for frontend ---
  script.
    window.stockFromDB = !{JSON.stringify(items)};

  // --- Load JS ---
  script(src="/js/stockreport.js")
